# Writeup
---
**CarND-PID-Control-Project**

The goals / steps of this project are the following:

* Implement a PID controller in C++ to maneuver the vehicle around the track.

[image1]: ./writeup_materials/PID_formula.png "image_PID"
[image2]: ./writeup_materials/P_control.gif "Image-P_control"
[image3]: ./writeup_materials/PD_control.gif "Image-PD_control"
[image4]: ./writeup_materials/PID_control.gif "Image-PID_control"

## [Rubric](https://review.udacity.com/#!/rubrics/1972/view) Points

#### Here I will consider the rubric points individually and describe how I addressed each point in my implementation.  

---

### Compilation

#### 1. Your code should compile.

My code can be compiled without errors with cmake and make.

### Implementation

#### 2. The PID procedure follows what was taught in the lessons.

Sure, I implemented the PID algorithm procedure taught in the lessons.

### Reflection

#### 3. Describe the effect each of the P, I, D components had in your implementation.
Below is the formula for PID controller:

![alt text][image1]

* The P component is proportional to the current value of the SetPoint − ProcessVariable error e(t). In this vehicle controller case, the P term is proportional to cross-track error term and it determines how fast the car control system response to the cross-track error. Using proportional control alone will result in overshooting and an error between the setpoint and the actual process value, because it requires an error to generate the proportional response.
The video below is an only P control example(unstable when handling curvature).

![alt text][image2]

* The D component is a best estimate of the future trend of the SetPoint − ProcessVariable error e(t), based on its current rate of change. It is sometimes called "anticipatory control", as it is effectively seeking to reduce the effect of the SP − PV error by exerting a control influence generated by the rate of error change. The more rapid the change, the greater the controlling or dampening effect. Using this derivative term along with the P component, the vehicle can avoid overshooting of target trajectory and get more stable behavior.
The video below is a PD control example(much better, avoid overshooting).

![alt text][image3]

* The I component accounts for past values of the SetPoint − ProcessVariable error e(t) and integrates them over time to produce the I term. For example, if there is a residual SetPoint − ProcessVariable error after the application of proportional control, the integral term seeks to eliminate the residual error by adding a control effect due to the historic cumulative value of the error. When the error is eliminated, the integral term will cease to grow. The I component could eliminate the system bias(the residual in steady state, may be generated by possible rocks and wind or systematic error of the steering system).
The video below is a PID control example(final solution).

![alt text][image4]


#### 4. Describe how the final hyperparameters were chosen.

The final hyperparameters (P, I, D coefficients) were chosen mannually by try and patience.

To tune a PID controller, I use the following steps:

1. Set all gains to zero.
2. Increase the P gain until the response to a disturbance is steady oscillation.
3. Increase the D gain until the the oscillations go away (i.e. it's critically damped).
4. Repeat steps 2 and 3 until increasing the D gain does not stop the oscillations.
5. Set P and D to the last stable values.
6. Increase the I gain until it brings you to the setpoint with the number of oscillations desired (normally zero but a quicker response can be had if you don't mind a couple oscillations of overshoot)


Finally, the chosen hyperparameters (P, I, D coefficients) is [P: 0.33, I: 0.0003, D: 25.5]. The vehicle can successfully drive around the track using this set of parameters under the condition that 'throttle' parameter is 0.3.


### Simulation

#### 5. The vehicle must successfully drive a lap around the track.
Yes, I successfully did this. No tire may leave the drivable portion of the track surface.

Referrences:
1.  https://robotics.stackexchange.com/questions/167/what-are-good-strategies-for-tuning-pid-loops
2.  https://www.wikiwand.com/en/PID_controller#/Pseudocode
